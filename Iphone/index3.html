<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">

<title>WORKS TRANSCRIBES 03.10.18 </title>

<!--[document information]>

  File: 1Gtest.html
  Created: 12/31/16
  Last Modified: 01/13/17
  Created by: Manuela L.
  Version: 1.00



<!-->
	<script src="https://cdn.WebRTC-Experiment.com/RecordRTC.js"></script>
<script src="https://cdn.webrtc-experiment.com/gumadapter.js"></script>
<style>
.container {
  position:absolute;
  top: 10px;
  left: 10px;
  z-index: 1;
}
.drawing {
  position:absolute;
  top: 250px;
  left: 250px;
  z-index: 2;
}
</style>

</head>
<body>
	<div id="voiceToText"></div>
  <div class="container" style="margin-top: 10px">
    <div class="row">
      <div class="col-sm-6">
        <p><button type="button" class="btn btn-lg btn-default" onclick="getStream('video')">Grab video</button></p>

        <video controls autoplay style="height:600px; width: 900px;"></video>
      </div>

    </div>
  </div>
<div class="drawing">  <img id="heatherCatPaw1WR" src="img_chars/Heather_catPaw_1_W,R.svg">
</div>
	
<!--[•••••••]-->
<script src="jquery-3.2.1.min.js"></script>
  <script src="jquery-ui.min.js"></script>
  

<script>
var recognition = new webkitSpeechRecognition(); //get new instance
recognition.start(); //start it
recognition.onend = function() { //a function to restart it when it stops
	recognition.start();
}

recognition.onresult = function(event) { 
    var whatWasHeard = event.results[0][0].transcript; //get what was heard    
    //document.body.innerHTML = whatWasHeard; //original version. Update below
	document.getElementById("voiceToText").innerHTML = whatWasHeard; //updated version
};
	
	




function getUserMedia(options, successCallback, failureCallback) {
  var api = navigator.getUserMedia || navigator.webkitGetUserMedia ||
    navigator.mozGetUserMedia || navigator.msGetUserMedia;
  if (api) {
    return api.bind(navigator)(options, successCallback, failureCallback);
  }
}

function getStream (type) {
  if (!navigator.getUserMedia && !navigator.webkitGetUserMedia &&
    !navigator.mozGetUserMedia && !navigator.msGetUserMedia) {
    alert('User Media API not supported.');
    return;
  }

  var constraints = {};
  constraints[type] = true;
  getUserMedia(constraints, function (stream) {
    var mediaControl = document.querySelector(type);

    if ('srcObject' in mediaControl) {
      mediaControl.srcObject = stream;
      mediaControl.src = (window.URL || window.webkitURL).createObjectURL(stream);
    } else if (navigator.mozGetUserMedia) {
      mediaControl.mozSrcObject = stream;
    }
  }, function (err) {
    alert('Error: ' + err);
  });
}

</script>



</body>
</html>
